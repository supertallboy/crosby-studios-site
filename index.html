<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crosby Studios</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --ui-pad: 20px; --ui-color: #fff; }
    html, body { height: 100%; }
    body {
      font-family: Arial, Helvetica, sans-serif;
      color: var(--ui-color);
      overflow: hidden;
      background: #000;
    }

    /* Fixed UI */
    .top-left, .top-right, .bottom-left {
      position: fixed; z-index: 5; font-size: 18px; letter-spacing: .04em;
    }
    .top-left  { top: var(--ui-pad); left: var(--ui-pad); }
    .top-right { top: var(--ui-pad); right: var(--ui-pad); }
    .top-right a { color: var(--ui-color); text-decoration: none; }
    .bottom-left { bottom: var(--ui-pad); left: var(--ui-pad); }
    .bottom-left img { width: 42px; height: auto; display: block; }

    /* Carousel */
    .carousel { position: fixed; inset: 0; overflow: hidden; }
    .track {
      display: flex; height: 100%;
      will-change: transform;
      touch-action: pan-y;
      cursor: grab;
    }
    .track.dragging { cursor: grabbing; }

    .slide {
      min-width: 100vw; height: 100vh; flex: 0 0 100%;
      background-position: center; background-size: cover; background-repeat: no-repeat;
      user-select: none; -webkit-user-drag: none; position: relative;
    }
    .slide-caption {
      position: absolute; right: var(--ui-pad); bottom: var(--ui-pad);
      font-weight: 700; font-size: 14px; letter-spacing: .04em;
      text-shadow: 0 1px 2px rgba(0,0,0,.35);
      pointer-events: none;
    }
  </style>
</head>
<body>
  <!-- Fixed UI -->
  <div class="top-left">© 2014–2025 CROSBY STUDIOS</div>
  <div class="top-right"><a href="info.html">INFO</a></div>
  <div class="bottom-left"><img src="images/logo.svg" alt="Logo" /></div>

  <!-- Carousel -->
  <div class="carousel" id="carousel">
    <div class="track" id="track"></div>
  </div>

  <script>
    // Slides config
    const slides = [
      { src: "images/photo1.jpeg", caption: "THE FOAM ROOM" },
      { src: "images/photo2.jpeg", caption: "MIRROR INSTALLATION" },
      { src: "images/photo3.jpeg", caption: "ALUMINUM SERIES" }
    ];

    const track = document.getElementById("track");

    function makeSlide(data, extraClass = "") {
      const el = document.createElement("div");
      el.className = `slide ${extraClass}`.trim();
      el.style.backgroundImage = `url('${data.src}')`;
      const cap = document.createElement("div");
      cap.className = "slide-caption";
      cap.textContent = data.caption || "";
      el.appendChild(cap);
      return el;
    }

    // Build slides with clones
    track.appendChild(makeSlide(slides[slides.length - 1], "clone"));
    slides.forEach(s => track.appendChild(makeSlide(s)));
    track.appendChild(makeSlide(slides[0], "clone"));

    // State
    let index = 1;
    let x = -index * window.innerWidth;
    let isDown = false;
    let startX = 0;
    let lastTouchX = null;
    let autoTimer = null;

    function setTransform(px, animate = false) {
      track.style.transition = animate ? "transform .6s ease" : "none";
      track.style.transform = `translate3d(${px}px,0,0)`;
    }
    setTransform(x);

    // Resize
    window.addEventListener("resize", () => {
      x = -index * window.innerWidth;
      setTransform(x);
    });

    // Drag / swipe
    function pointerDown(clientX) {
      isDown = true; startX = clientX;
      track.classList.add("dragging");
      cancelAuto();
    }
    function pointerMove(clientX) {
      if (!isDown) return;
      const delta = clientX - startX;
      setTransform(x + delta);
    }
    function pointerUp(clientX) {
      if (!isDown) return;
      isDown = false; track.classList.remove("dragging");
      const delta = clientX - startX;
      const threshold = window.innerWidth * 0.15;
      if (delta < -threshold) goTo(index + 1);
      else if (delta > threshold) goTo(index - 1);
      else setTransform(x, true);
      startAuto();
    }

    // Mouse
    track.addEventListener("mousedown", e => pointerDown(e.clientX));
    window.addEventListener("mousemove", e => pointerMove(e.clientX));
    window.addEventListener("mouseup",   e => pointerUp(e.clientX));

    // Touch
    track.addEventListener("touchstart", e => {
      lastTouchX = e.touches[0].clientX;
      pointerDown(lastTouchX);
    }, { passive: true });
    track.addEventListener("touchmove", e => {
      lastTouchX = e.touches[0].clientX;
      pointerMove(lastTouchX);
    }, { passive: true });
    track.addEventListener("touchend", () => pointerUp(lastTouchX ?? 0), { passive: true });

    // Prevent drag of images
    track.addEventListener("dragstart", e => e.preventDefault());

    // Navigation / Looping
    function goTo(newIndex) {
      index = newIndex;
      x = -index * window.innerWidth;
      setTransform(x, true);

      track.addEventListener("transitionend", () => {
        if (index === 0) {
          index = slides.length;
          x = -index * window.innerWidth;
          setTransform(x, false);
        } else if (index === slides.length + 1) {
          index = 1;
          x = -index * window.innerWidth;
          setTransform(x, false);
        }
      }, { once: true });
    }

    // Autoplay
    function startAuto() {
      cancelAuto();
      autoTimer = setInterval(() => goTo(index + 1), 5000);
    }
    function cancelAuto() {
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = null;
    }
    startAuto();

    // Keyboard arrows
    window.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") { cancelAuto(); goTo(index + 1); startAuto(); }
      if (e.key === "ArrowLeft")  { cancelAuto(); goTo(index - 1); startAuto(); }
    });
  </script>
</body>
</html>
